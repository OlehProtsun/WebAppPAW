// Імпортуємо NavLink та Outlet з react-router.
// - NavLink: спеціальний компонент-посилання, який "знає", чи активний він зараз (відповідає поточному маршруту),
//   і дозволяє зручно стилізувати активну вкладку.
// - Outlet: "плейсхолдер" для вкладених маршрутів — тут буде рендеритись контент дочірніх сторінок.
import { NavLink, Outlet } from "react-router";

// Описуємо набір вкладок для верхнього меню (tabs).
// Тип: масив об’єктів, де кожна вкладка має:
// - to: шлях маршруту, куди веде вкладка,
// - label: текст, який бачить користувач,
// - end?: опційний прапорець для точного збігу маршруту (важливо для "/").
//
// end=true означає:
// вкладка буде активною лише тоді, коли шлях збігається точно ("/"),
// а не коли поточний маршрут починається з "/" (бо це було б завжди).
const tabs: Array<{ to: string; label: string; end?: boolean }> = [
  { to: "/", label: "Home", end: true },      // Головна сторінка: точний збіг маршруту "/"
  { to: "/projects", label: "Projects" },     // Сторінка проєктів: для цього end не потрібен
];

// Основний компонент макету додатку.
// Він задає спільну "рамку" сторінок: верхню панель з вкладками + контейнер для контенту сторінок.
export function AppLayout() {
  return (
    <div>
      {/* Верхній хедер (topbar) — зазвичай тут навігація/меню */}
      <header className="topbar">
        {/* Внутрішній контейнер topbar (наприклад, для вирівнювання контенту по ширині) */}
        <div className="topbar-inner">
          {/* Контейнер для вкладок */}
          <div className="tabs">
            {/* Генеруємо вкладки на основі масиву tabs.
                Це зручно: щоб додати/прибрати вкладку, достатньо змінити масив, а не JSX вручну. */}
            {tabs.map(t => (
              <NavLink
                // key потрібен React для коректного відстеження елементів списку під час ререндерів.
                key={t.to}
                // to — шлях, куди веде вкладка.
                to={t.to}
                // end — передаємо прапорець точного збігу маршруту (актуально для "/").
                end={t.end}
                // className тут задається функцією, яка отримує стан посилання.
                // react-router передає об’єкт з прапорцем isActive:
                // - isActive=true, якщо маршрут цього NavLink відповідає поточному URL.
                //
                // Ми завжди додаємо базовий клас "tab",
                // і якщо вкладка активна — додаємо "tab-active" для стилізації активної вкладки.
                className={({ isActive }) =>
                  `tab ${isActive ? "tab-active" : ""}`
                }
              >
                {/* Підпис вкладки, який бачить користувач */}
                {t.label}
              </NavLink>
            ))}
          </div>
        </div>
      </header>

      {/* Основний контент сторінки */}
      <main
        className="container"
        // Інлайн-стиль: додаємо відступ зверху (paddingTop: 18px),
        // щоб контент не "лип" до topbar або мав потрібний візуальний інтервал.
        style={{ paddingTop: 18 }}
      >
        {/* Outlet — місце, де react-router відрендерить компонент поточного дочірнього маршруту.
            Наприклад:
            - якщо маршрут "/", тут буде головна сторінка
            - якщо маршрут "/projects", тут буде сторінка Projects */}
        <Outlet />
      </main>
    </div>
  );
}